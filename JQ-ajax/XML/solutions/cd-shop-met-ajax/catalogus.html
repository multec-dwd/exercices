<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="author" content="Jan Klaas Van Den Meersche">
    <title>Album catalogus</title>
    <link type="text/css" href="style.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script>
        $(function(){
        	
        	$.ajax({
        		url: 'catalogus.xml',
        		dataType:'xml',
        		success: onSuccess,
        		error: function(err){console.error('Fout: ', err);}
        	});
        	
        });
        
        function onSuccess(xml){
        	
        	//* //loop elk album
        	$(xml).find('album').each(function(){
        		var $this = $(this);
        		$div = $('<div/>').addClass('album'); //maak div met class "album"
        		$div.append($("<img/>").attr("src",$this.find("img").attr('src')));//voeg afbeelding toe aan div
        		$div.append($("<p/>").attr("class","title").text($this.find("title").text()));//voeg p met titel toe aan div
        		$div.append($("<p/>").attr("class","artist").text($this.find("artist").text()));//voeg p met artiest toe aan div
        		$div.appendTo($(document.body));
        	});//*/
        	
        	/* //performantere versie > eerst een lange string aanmaken, na de loop string omzetten naar jQ object en toevoegen aan de pagina
        	var catalogue;
        	//loop elk album
        	$(xml).find('album').each(function(){
        		var $this = $(this);
        		div = '<div class="album">'; //maak div met class "album"
        		div += '<img src="' + $this.find("img").attr('src') + '"/>';//voeg afbeelding toe aan div
        		div += '<p class="title">' + $this.find("title").text() + '</p>';//voeg p met titel toe aan div
        		div += '<p class="artist">' + $this.find("artist").text() + '</p>';//voeg p met artiest toe aan div
        		div += '</div>'; //sluit div
        		catalogue += div;
        	});
        	$(document.body).append($(catalogue));//*/
        }
    </script>
</head>

<body>
    <h1>Oefening 5.2.7. CD-lijst via Ajax</h1>
    <h2>Album catalogus</h2>
</body>

</html>
